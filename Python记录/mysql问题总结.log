针对mysql插入emogi表情错误提示：
1.修改数据库连接charset='utf8mb4'，2.修改数据库字段编码格式为'utf8mb4',。
2.创建数据库并指定编码
CREATE DATABASE IF NOT EXISTS my_db default character set utf8 COLLATE utf8_general_ci;

ubuntu安装mysql5.7出现问题：
sudo apt-get install mysql-server5.7后没有提示设置密码。
解决办法:
            1. sudo vim /etc/mysql/debian.cnf
            在这个文件里面有着MySQL默认的用户名和用户密码， 
            最最重要的是：用户名默认的不是root，而是debian-sys-maint，如下所示

            # Automatically generated for Debian scripts. DO NOT TOUCH!
            [client]
            host     = localhost
            ***user     = debian-sys-maint
            password = Z1fVrmTiZNxxw29o***
            socket   = /var/run/mysqld/mysqld.sock
            [mysql_upgrade]
            host     = localhost
            user     = debian-sys-maint
            password = Z1fVrmTiZNxxw29o
            socket   = /var/run/mysqld/mysqld.sock
            密码会随即给一个很复杂的，这个时候，要进入MySQL的话，就是需要在终端把root更改为debian-sys-maint，如下代码

            mysql -u debian-sys-maint -p
            然后终端会提示你输入密码

            Enter password: 
            这是输入文件中的密码即可成功登录。
            update mysql.user set authentication_string=password('password'),plugin=""  where user='root'and Host = 'localhost';
            需要将authentication和plugin两个字段值改掉，plugin不改，就必须使用sudu su登录才可使用，主要修改root的权限

2.mysql 存储过程
mysql存储过程没有智能提示，找bug比较困难，一定要注意分号（；）
两种创建变量方式：
(1)declare lotid int default 0; ----在存储过程中使用
(2)set @lotid = '123';------在会话的全局使用
concat的使用例如
set @table_name = 'report_demo'
concat('Truncate Table ', @table_name )------注意Table后面的空格和最后不能像元组加逗号(,)

SHOW PROCEDURE STATUS LIKE 'C%'\G; --查看存储过程
DROP PROCEDURE CountProc; 删除存储过程

1>一般刚开始写存储过程：
delimiter // 结束时候再换回delimiter ;
2>存储过程中if else使用时一定注意end if；不要忘记，if EXISTS 就是if语句了
例如：
Delimiter //
CREATE PROCEDURE report_demo(in tail varchar(20))
Begin
set @taildate= concat('reprot_', tail);
if EXISTS (select 1 from information_schema, Tables where table_name = @taildate and 
           table_schema = Database()) Then
    set @drop_sql = concat('Truncate Tabel ', @taildate);
    prepare drop_sql from @drop_sql;
    execute drop_sql;
else 
    set @create_sql = concate('create table if not exist ', @taildate, 
    '(id int not null auto_incrament primary key,name varchar(20))');
    prepare create_sql from @create_sql;
    execute create_sql;
end if;
end //
delimiter ;

mysql的权限问题：
查看所有用户: select * from msyql.user;
1）查看用户权限：
-- 查看本地root的权限，没有指定后面的localhost则默认为'%'
show grants for root@'localhost';
-- 查看指定host的root的权限
show grants for root@'192.168.122.12';
2）创建用户
use mysql;
create user 'subuser'@'localhost' identified by 'Avl1108'  &&&&
create user 'subuser'@'10.209.156.242' identified by 'Avl1108'
3)修改用户名密码：
5.7 以下版本：
use msyql;
update user set password = password('123456') where user = 'subuser';
5.7及以上版本:
use msyql;
update user set authentication_string = password('123456') where user = 'subuser';
flush privileges;
4)删除用户
delete from user where user = 'subuser' and host = 'localhost';
flush privileges;
5)赋予撤销
user mysql;
grant select, delete, update, insert on database.table to 'subuser'@'%' identified by 'Avl11108';
flush privileges;  直接执行这两条语句也有创建用户的功能
赋予全部权限：
grant all privileges on ..........

revoke update on .........
flush privileges;
revoke all on ..........
flush privileges;

mysql连接数问题:
查看连接数: show variables like 'max_connnections'
修改连接数：set global max_connnections=10
其中经过测试正常活动的连接数为max_connectons + 1,如上即为11，其中打开连接算一个，打开数据库算一个连接，
打开具体的表，查询一条语句都算连接，但是经过测试算上所有的为你设置的max_connnections + 1 ,其中连接数最大值
为2048
查看当前连接数：SHOW  FULL PROCESSLIST
10.mysql分组选出最大值的记录
SELECT a.* from stu a INNER JOIN 
(SELECT age, MAX(height) height from stu GROUP BY age)b
 on a.age=b.age and a.height=b.height ORDER BY age


 2.mysql5.7更改data位置:(linux方式)
 修改配置文件 /etc/my.cnf 包括sock
 执行命令:chcon -R --reference=/var/lib/mysql /disk2T-2/mysqldb
 setenforce 0 
 (windows方式)
 更改my.ini文件data_file,照着已有的写路径即可，重要的是要讲原来路径下的文件复制过去，包含一些必要的数据库配置文件
 
 3.sql_mode报错解决:
修改my.cnf:
sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
4.linux系统忽略大小写:
lower_case_table_names=1

5.快速导出导入大量数据的方式:
 (1)查看数据库引擎 show engines;
 (2)更改数据库引擎：InnoDB
 default-storage-engine=MyISAM
 (3)重启mysql服务
 (4)导出数据:select * INTO outfile 'data.txt' fields terminated by ',' from 1x_tx;
 若出现Error :.........--secure-file-priv option错误
 执行命令: select @@global.secure_file_priv查看安全路径 

 +--------------------------+
 |@@global.secure_file_priv |
 +--------------------------+
 |/var/lib/mysql-files      |
 +--------------------------+

 (5)导入数据:load data infile 'data.txt' into table 2x_rx_bak fields terminated by ',';
 load data infile '/var/lib/mysql-files/data.txt' into table 2x_rx_bak fields terminated by ',';
 (6)MyISAM引擎更改为InnoDB引擎后要删除logs，ibdata相关文件

 6. mysql创建索引的列最大值为varchar(255)(不改最大设置值的情况下)
 因为mysql的InnoDB引擎设置了最大索引列长度不超过767，使用utf8编码时255*3=765byte，刚好在其范围
 7.查看索引:
 show index from table_name;
创建索引:
ALTER TABLE table_name ADD INDEX index_name (column_list)
ALTER TABLE table_name ADD UNIQUE (column_list)
ALTER TABLE table_name ADD PRIMARY KEY (column_list)

CREATE INDEX index_name ON table_name (column_list)
CREATE UNIQUE INDEX index_name ON table_name (column_list)
删除索引:
DROP INDEX index_name ON talbe_name
ALTER TABLE table_name DROP INDEX index_name
ALTER TABLE table_name DROP PRIMARY KEY
8.mysql查询缓存
show VARIABLES like '%query_cache%'
show STATUS like 'qcache%'
SELECT SQL_NO_CACHE value from index2 limit 50000, 1000
show status like 'last_query_cost'
show INDEX from index2
EXPLAIN SELECT * from index3
9.navicate windows破解
下载navicate preminum,下载navicat-keygen-for-x64，github地址https://github.com/DoubleLabyrinth/navicat-keygen/releases
解压缩navicate-keygen-for-x64安装包，并进入安装包，执行navicate-patch.exe "D\Navicat Premium 12"，生成RegPrivateKey.pem
然后执行navicate-keygen.exe -text RegPrivateKey.pem,
安装提示输入要破解的navicate类型，语言，版本等，然后等待输入Request code
断网，打开navicate，找到注册窗口，输入命令行生成的序列号，在手动激活窗口输入请求码，至少两次回车，得到激活码，然后填入navicate，然后激活即可

9.使用mysql直接copy data文件夹从5.5到5.7版本会出现
mysql Table 'performance_schema.session_status' doesn't exist错误
解决办法，进入mysql安装目录的bin文件，执行如下命令
mysql_upgrade -u root -p --force
10.mysql主从复制
步骤：一、master修改：
1>修改mysql配置
#日志文件名 log-bin="E:/MySqlData/mysql-bin"
#主数据库端的ID号：server-id=1
2>重启mysql，创建用于同步的账户
#创建slave账号slave_1,密码slave_1
mysql>grant replication slave on *.* 'slave_1'@'%' identified by 'slave_1'
#更新数据库权限: flush privileges
3>查询master状态：show master STATUS
二.从数据库slave的修改
1>从数据库端ID号,server-id=2
2>执行同步命令：
mysql>change master to master_host='127.0.0.1',master_user='slave_1',
master_password='slave_1',master_log_file='mysql-bin.000009',master_log_pos=196;
3>检查从数据库状态: show slave statusm,确保Slave_IO_Running及Slave_Sql_Running进程必须是yes状态
其他可能需要用到的配置:
master端：binlog-do-db=YYY 需要同步的数据库，不在内的不同步，多数据库逗号隔开。
如: binlog-do-db=test1, test2
另外有: binlog-ignore-db=test1, test2
slave端:replicate-do-db 设定需要复制的数据库，多数据库用逗号隔开
replicate-ignore-db 设定需要忽略的数据库
replicate-do-table 设定需要复制的表
replicate-ignore-table 设定需要忽略的复制表
replicate-wild-do-talbe 和replicate-do-table功能一样，但是可以使用通配符
replicate-wild-ignore-table 和replicate-ignore-table功能一样，可使用通配符
如：replicate-rewrite-db=pslcloud->pslcloud111
replicate-do-table = pslcloud111.teacher
replicate-do-table = pslcloud111.student
最后：若从表使用trigger，则master的logbin_format不应使用row模式，最后使用mixed，
如：binlog_format=MIXED


